(()=>{var e={};e.id=611,e.ids=[611],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4901:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});var t=(0,s(46281).A)("outline","eye","IconEye",[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11507:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,95862,23)),Promise.resolve().then(s.bind(s,26482)),Promise.resolve().then(s.bind(s,97680)),Promise.resolve().then(s.bind(s,48625)),Promise.resolve().then(s.bind(s,82542)),Promise.resolve().then(s.bind(s,52311))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21275:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>j,metadata:()=>y});var t=s(30535),a=s(37694),o=s(68685),n=s(38071),i=s(97680),l=s(44557),d=s(32368),c=s(16893),u=s(52311),m=s(82542);async function h({}){let e=c.F$.get("page"),r=c.F$.get("search"),s=c.F$.get("perPage"),a=c.F$.get("status"),o=c.F$.get("paymentStatus"),n=c.F$.get("shippingStatus"),i={...r&&{search:r},...a&&{status:a},...o&&{paymentStatus:o},...n&&{shippingStatus:n}},{orders:l,pagination:h}=await d.QE.getOrders({filters:i,page:Number(e)||1,limit:Number(s)||10});return(0,t.jsx)(u.OrderTable,{data:l,totalItems:h.total,columns:m.columns})}var p=s(38462),x=s(440),g=s(95862),b=s.n(g),v=s(75186);let y={title:"Dashboard: Orders"};async function j(e){let r=await e.searchParams;c.F$.parse(r);let s=(0,c.lK)({...r});return(0,t.jsx)(a.A,{scrollable:!1,children:(0,t.jsxs)("div",{className:"flex flex-1 flex-col space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsx)(n.D,{title:"Orders",description:"Manage customer orders and track fulfillment status."}),(0,t.jsxs)(b(),{href:"/dashboard/orders/new",className:(0,p.cn)((0,o.r)(),"text-xs md:text-sm"),children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Create Order"]})]}),(0,t.jsx)(i.Separator,{}),(0,t.jsx)(v.Suspense,{fallback:(0,t.jsx)(l.O,{columnCount:6,rowCount:10,filterCount:3}),children:(0,t.jsx)(h,{})},s)]})})}},26536:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});var t=(0,s(46281).A)("outline","calendar","IconCalendar",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M11 15h1",key:"svg-4"}],["path",{d:"M12 15v3",key:"svg-5"}]])},27910:e=>{"use strict";e.exports=require("stream")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},48459:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,60168,23)),Promise.resolve().then(s.bind(s,34116)),Promise.resolve().then(s.bind(s,26030)),Promise.resolve().then(s.bind(s,38115)),Promise.resolve().then(s.bind(s,75359)),Promise.resolve().then(s.bind(s,67169))},52311:(e,r,s)=>{"use strict";s.d(r,{OrderTable:()=>t});let t=(0,s(1609).registerClientReference)(function(){throw Error("Attempted to call OrderTable() from the server but OrderTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/dux/Desktop/store/admin/src/features/orders/components/order-tables/index.tsx","OrderTable")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67169:(e,r,s)=>{"use strict";s.d(r,{OrderTable:()=>d});var t=s(33333),a=s(24470),o=s(63193),n=s(26456),i=s(68340),l=s(83684);function d({data:e,totalItems:r,columns:s}){let[d]=(0,l.ZA)("perPage",l.GJ.withDefault(10)),c=Math.ceil(r/d),{table:u}=(0,i.u)({data:e,columns:s,pageCount:c,shallow:!1,debounceMs:500});return 0===e.length&&0===r?(0,t.jsx)(n.C1,{}):(0,t.jsx)(a.b,{table:u,children:(0,t.jsx)(o.w,{table:u})})}},73024:e=>{"use strict";e.exports=require("node:fs")},74075:e=>{"use strict";e.exports=require("zlib")},75359:(e,r,s)=>{"use strict";s.d(r,{columns:()=>S});var t=s(33333),a=s(12386),o=s(53636),n=s(26536),i=s(30935),l=s(65358),d=s(46281),c=(0,d.A)("outline","currency-dollar","IconCurrencyDollar",[["path",{d:"M16.7 8a3 3 0 0 0 -2.7 -2h-4a3 3 0 0 0 0 6h4a3 3 0 0 1 0 6h-4a3 3 0 0 1 -2.7 -2",key:"svg-0"}],["path",{d:"M12 3v3m0 12v3",key:"svg-1"}]]),u=s(44691),m=(0,d.A)("outline","truck","IconTruck",[["path",{d:"M7 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M17 17m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M5 17h-2v-11a1 1 0 0 1 1 -1h9v12m-4 0h6m4 0h2v-6h-8m0 -5h5l3 5",key:"svg-2"}]]),h=s(8453),p=s(97587),x=s(12734),g=s(61840),b=s(4901),v=s(19746),y=(0,d.A)("outline","printer","IconPrinter",[["path",{d:"M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2",key:"svg-0"}],["path",{d:"M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4",key:"svg-1"}],["path",{d:"M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z",key:"svg-2"}]]),j=(0,d.A)("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]),N=s(6430),f=s(17750),P=s(54223),w=s(24176);let k=({data:e})=>{let[r]=(0,w.useState)(!1),[s,a]=(0,w.useState)(!1),o=(0,P.useRouter)(),n=async()=>{},i=r=>{console.log(`Updating order ${e.orderNumber} to ${r}`)},l="PENDING"===e.status||"PROCESSING"===e.status,d="PROCESSING"===e.status&&"PAID"===e.paymentStatus,c="SHIPPED"===e.status;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.W,{isOpen:s,onClose:()=>a(!1),onConfirm:n,loading:r,title:"Cancel Order",description:`Are you sure you want to cancel order ${e.orderNumber}? This action cannot be undone.`}),(0,t.jsxs)(x.rI,{modal:!1,children:[(0,t.jsx)(x.ty,{asChild:!0,children:(0,t.jsxs)(p.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,t.jsx)(g.A,{className:"h-4 w-4"})]})}),(0,t.jsxs)(x.SQ,{align:"end",children:[(0,t.jsx)(x.lp,{children:"Actions"}),(0,t.jsxs)(x._2,{onClick:()=>o.push(`/dashboard/orders/${e.id}`),children:[(0,t.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"View Details"]}),(0,t.jsxs)(x._2,{onClick:()=>o.push(`/dashboard/orders/${e.id}/edit`),children:[(0,t.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Edit Order"]}),(0,t.jsxs)(x._2,{onClick:()=>window.print(),children:[(0,t.jsx)(y,{className:"mr-2 h-4 w-4"}),"Print Invoice"]}),(0,t.jsx)(x.mB,{}),"PENDING"===e.status&&(0,t.jsxs)(x._2,{onClick:()=>i("PROCESSING"),children:[(0,t.jsx)(j,{className:"mr-2 h-4 w-4"}),"Start Processing"]}),d&&(0,t.jsxs)(x._2,{onClick:()=>i("SHIPPED"),children:[(0,t.jsx)(m,{className:"mr-2 h-4 w-4"}),"Mark as Shipped"]}),c&&(0,t.jsxs)(x._2,{onClick:()=>i("DELIVERED"),children:[(0,t.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Mark as Delivered"]}),l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.mB,{}),(0,t.jsxs)(x._2,{onClick:()=>a(!0),className:"text-red-600 focus:text-red-600",children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Cancel Order"]})]})]})]})]})},E={PENDING:"bg-yellow-500/10 text-yellow-600 border-yellow-200",PROCESSING:"bg-blue-500/10 text-blue-600 border-blue-200",SHIPPED:"bg-purple-500/10 text-purple-600 border-purple-200",DELIVERED:"bg-green-500/10 text-green-600 border-green-200",CANCELLED:"bg-red-500/10 text-red-600 border-red-200",REFUNDED:"bg-gray-500/10 text-gray-600 border-gray-200"},C={PENDING:"bg-yellow-500/10 text-yellow-600 border-yellow-200",PAID:"bg-green-500/10 text-green-600 border-green-200",FAILED:"bg-red-500/10 text-red-600 border-red-200",REFUNDED:"bg-gray-500/10 text-gray-600 border-gray-200"},D={PENDING:"bg-yellow-500/10 text-yellow-600 border-yellow-200",PROCESSING:"bg-blue-500/10 text-blue-600 border-blue-200",SHIPPED:"bg-purple-500/10 text-purple-600 border-purple-200",DELIVERED:"bg-green-500/10 text-green-600 border-green-200",RETURNED:"bg-orange-500/10 text-orange-600 border-orange-200"},S=[{id:"orderNumber",accessorKey:"orderNumber",header:({column:e})=>(0,t.jsx)(o.w,{column:e,title:"Order #"}),cell:({row:e})=>{let r=e.original;return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-medium",children:r.orderNumber}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center",children:[(0,t.jsx)(n.A,{className:"w-3 h-3 mr-1"}),new Date(r.createdAt).toLocaleDateString()]})]})}},{id:"customer",header:"Customer",cell:({row:e})=>{let r=e.original;return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"font-medium flex items-center",children:[(0,t.jsx)(i.A,{className:"w-3 h-3 mr-1"}),r.user.firstName," ",r.user.lastName]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:r.user.email})]})}},{id:"items",header:"Items",cell:({row:e})=>{let r=e.original,s=r.items.length,a=r.items[0];return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"font-medium flex items-center",children:[(0,t.jsx)(l.A,{className:"w-3 h-3 mr-1"}),s," item",1!==s?"s":""]}),a&&(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[a.product.name,s>1&&` +${s-1} more`]})]})}},{id:"total",header:({column:e})=>(0,t.jsx)(o.w,{column:e,title:"Total"}),cell:({row:e})=>{let r=e.original;return(0,t.jsxs)("div",{className:"font-medium flex items-center",children:[(0,t.jsx)(c,{className:"w-3 h-3 mr-1"}),"R",r.totalAmount.toNumber().toFixed(2)]})}},{id:"status",accessorKey:"status",header:({column:e})=>(0,t.jsx)(o.w,{column:e,title:"Status"}),cell:({row:e})=>{let r=e.original;return(0,t.jsx)(a.E,{className:E[r.status]||"bg-gray-500/10 text-gray-600 border-gray-200",children:r.status.toLowerCase()})}},{id:"paymentStatus",accessorKey:"paymentStatus",header:"Payment",cell:({row:e})=>{let r=e.original;return(0,t.jsxs)(a.E,{className:C[r.paymentStatus]||"bg-gray-500/10 text-gray-600 border-gray-200",children:[(0,t.jsx)(u.A,{className:"w-3 h-3 mr-1"}),r.paymentStatus.toLowerCase()]})}},{id:"shippingStatus",accessorKey:"shippingStatus",header:"Shipping",cell:({row:e})=>{let r=e.original;return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)(a.E,{className:D[r.shippingStatus]||"bg-gray-500/10 text-gray-600 border-gray-200",children:[(0,t.jsx)(m,{className:"w-3 h-3 mr-1"}),r.shippingStatus.toLowerCase()]}),r.trackingNumber&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["#",r.trackingNumber]})]})}},{id:"actions",cell:({row:e})=>(0,t.jsx)(k,{data:e.original})}]},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},79551:e=>{"use strict";e.exports=require("url")},82542:(e,r,s)=>{"use strict";s.d(r,{columns:()=>t});let t=(0,s(1609).registerClientReference)(function(){throw Error("Attempted to call columns() from the server but columns is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/dux/Desktop/store/admin/src/features/orders/components/order-tables/columns.tsx","columns")},94716:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>o.default,__next_app__:()=>c,pages:()=>d,routeModule:()=>u,tree:()=>l});var t=s(54625),a=s(30662),o=s(55369),n=s(38471),i={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);s.d(r,i);let l={children:["",{children:["dashboard",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,21275)),"/home/dux/Desktop/store/admin/src/app/dashboard/orders/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,90214)),"/home/dux/Desktop/store/admin/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,40810))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,20425)),"/home/dux/Desktop/store/admin/src/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(s.bind(s,55369)),"/home/dux/Desktop/store/admin/src/app/global-error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,94317)),"/home/dux/Desktop/store/admin/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,98765,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,1674,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,40810))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/home/dux/Desktop/store/admin/src/app/dashboard/orders/page.tsx"],c={require:s,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/orders/page",pathname:"/dashboard/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},96330:e=>{"use strict";e.exports=require("@prisma/client")}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[8291,3861,8281,5958,1151,2257,6912,6395,2505,8363,3662,8850],()=>s(94716));module.exports=t})();