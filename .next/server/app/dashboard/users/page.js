(()=>{var e={};e.id=9242,e.ids=[9242],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4901:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var t=(0,r(46281).A)("outline","eye","IconEye",[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26536:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var t=(0,r(46281).A)("outline","calendar","IconCalendar",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M11 15h1",key:"svg-4"}],["path",{d:"M12 15v3",key:"svg-5"}]])},27910:e=>{"use strict";e.exports=require("stream")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30329:(e,s,r)=>{"use strict";r.d(s,{UserTable:()=>d});var t=r(33333),a=r(24470),n=r(63193),o=r(26456),i=r(68340),l=r(83684);function d({data:e,totalItems:s,columns:r}){let[d]=(0,l.ZA)("perPage",l.GJ.withDefault(10)),c=Math.ceil(s/d),{table:u}=(0,i.u)({data:e,columns:r,pageCount:c,shallow:!1,debounceMs:500});return 0===e.length&&0===s?(0,t.jsx)(o.BM,{}):(0,t.jsx)(a.b,{table:u,children:(0,t.jsx)(n.w,{table:u})})}},30538:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,60168,23)),Promise.resolve().then(r.bind(r,34116)),Promise.resolve().then(r.bind(r,26030)),Promise.resolve().then(r.bind(r,38115)),Promise.resolve().then(r.bind(r,69423)),Promise.resolve().then(r.bind(r,30329))},33873:e=>{"use strict";e.exports=require("path")},38450:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.default,__next_app__:()=>c,pages:()=>d,routeModule:()=>u,tree:()=>l});var t=r(54625),a=r(30662),n=r(55369),o=r(38471),i={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(s,i);let l={children:["",{children:["dashboard",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,45419)),"/home/dux/Desktop/store/admin/src/app/dashboard/users/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,90214)),"/home/dux/Desktop/store/admin/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,40810))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,20425)),"/home/dux/Desktop/store/admin/src/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(r.bind(r,55369)),"/home/dux/Desktop/store/admin/src/app/global-error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,94317)),"/home/dux/Desktop/store/admin/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,98765,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1674,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,40810))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/home/dux/Desktop/store/admin/src/app/dashboard/users/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/users/page",pathname:"/dashboard/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},39511:(e,s,r)=>{"use strict";r.d(s,{UserTable:()=>t});let t=(0,r(1609).registerClientReference)(function(){throw Error("Attempted to call UserTable() from the server but UserTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/dux/Desktop/store/admin/src/features/users/components/user-tables/index.tsx","UserTable")},45419:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>f,metadata:()=>j});var t=r(30535),a=r(37694),n=r(68685),o=r(38071),i=r(97680),l=r(44557),d=r(32368),c=r(16893),u=r(39511),m=r(52814);async function h({}){let e=c.F$.get("page"),s=c.F$.get("search"),r=c.F$.get("perPage"),a=c.F$.get("role"),{users:n,pagination:o}=await d.DL.getUsers({search:s||void 0,role:a||void 0,page:Number(e)||1,limit:Number(r)||10});return(0,t.jsx)(u.UserTable,{data:n,totalItems:o.total,columns:m.columns})}var p=r(38462),x=r(440),v=r(95862),b=r.n(v),g=r(75186);let j={title:"Dashboard: Users"};async function f(e){let s=await e.searchParams;c.F$.parse(s);let r=(0,c.lK)({...s});return(0,t.jsx)(a.A,{scrollable:!1,children:(0,t.jsxs)("div",{className:"flex flex-1 flex-col space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsx)(o.D,{title:"Users",description:"Manage customer accounts and user permissions."}),(0,t.jsxs)(b(),{href:"/dashboard/users/new",className:(0,p.cn)((0,n.r)(),"text-xs md:text-sm"),children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Add User"]})]}),(0,t.jsx)(i.Separator,{}),(0,t.jsx)(g.Suspense,{fallback:(0,t.jsx)(l.O,{columnCount:6,rowCount:10,filterCount:2}),children:(0,t.jsx)(h,{})},r)]})})}},52814:(e,s,r)=>{"use strict";r.d(s,{columns:()=>t});let t=(0,r(1609).registerClientReference)(function(){throw Error("Attempted to call columns() from the server but columns is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/dux/Desktop/store/admin/src/features/users/components/user-tables/columns.tsx","columns")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69423:(e,s,r)=>{"use strict";r.d(s,{columns:()=>k});var t=r(33333),a=r(84296),n=r(12386),o=r(53636),i=r(46281),l=(0,i.A)("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]),d=r(63876),c=(0,i.A)("outline","star","IconStar",[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]]),u=r(26536),m=r(8453),h=r(97587),p=r(12734),x=r(61840),v=r(4901),b=r(19746),g=(0,i.A)("outline","map-pin","IconMapPin",[["path",{d:"M9 11a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-0"}],["path",{d:"M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.827 0l-4.244 -4.243a8 8 0 1 1 11.314 0z",key:"svg-1"}]]),j=(0,i.A)("outline","shield","IconShield",[["path",{d:"M12 3a12 12 0 0 0 8.5 3a12 12 0 0 1 -8.5 15a12 12 0 0 1 -8.5 -15a12 12 0 0 0 8.5 -3",key:"svg-0"}]]),f=r(25980),y=r(54223),A=r(24176);let N=({data:e})=>{let[s]=(0,A.useState)(!1),[r,a]=(0,A.useState)(!1),n=(0,y.useRouter)(),o=async()=>{},i=["ADMIN","SUPER_ADMIN","MANAGER"].includes(e.role);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.W,{isOpen:r,onClose:()=>a(!1),onConfirm:o,loading:s,title:"Delete User",description:`Are you sure you want to delete ${e.firstName} ${e.lastName}? This action cannot be undone.`}),(0,t.jsxs)(p.rI,{modal:!1,children:[(0,t.jsx)(p.ty,{asChild:!0,children:(0,t.jsxs)(h.$,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,t.jsx)(x.A,{className:"h-4 w-4"})]})}),(0,t.jsxs)(p.SQ,{align:"end",children:[(0,t.jsx)(p.lp,{children:"Actions"}),(0,t.jsxs)(p._2,{onClick:()=>n.push(`/dashboard/users/${e.id}`),children:[(0,t.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"View Profile"]}),(0,t.jsxs)(p._2,{onClick:()=>n.push(`/dashboard/users/${e.id}/edit`),children:[(0,t.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Edit User"]}),(0,t.jsxs)(p._2,{onClick:()=>n.push(`/dashboard/users/${e.id}/addresses`),children:[(0,t.jsx)(g,{className:"mr-2 h-4 w-4"}),"Manage Addresses"]}),(0,t.jsx)(p.mB,{}),(0,t.jsxs)(p._2,{onClick:()=>window.open(`mailto:${e.email}`,"_blank"),children:[(0,t.jsx)(l,{className:"mr-2 h-4 w-4"}),"Send Email"]}),!i&&(0,t.jsxs)(p._2,{onClick:()=>n.push(`/dashboard/users/${e.id}/permissions`),children:[(0,t.jsx)(j,{className:"mr-2 h-4 w-4"}),"Manage Permissions"]}),(0,t.jsx)(p.mB,{}),(0,t.jsxs)(p._2,{onClick:()=>a(!0),className:"text-red-600 focus:text-red-600",children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Delete User"]})]})]})]})},w={CUSTOMER:"bg-blue-500/10 text-blue-600 border-blue-200",STAFF:"bg-green-500/10 text-green-600 border-green-200",MANAGER:"bg-purple-500/10 text-purple-600 border-purple-200",ADMIN:"bg-red-500/10 text-red-600 border-red-200",SUPER_ADMIN:"bg-gray-500/10 text-gray-600 border-gray-200"},k=[{id:"user",header:"User",cell:({row:e})=>{let s=e.original,r=`${s.firstName?.charAt(0)||""}${s.lastName?.charAt(0)||""}`.toUpperCase()||"U";return(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(a.Avatar,{className:"h-10 w-10",children:[(0,t.jsx)(a.AvatarImage,{src:s.imageUrl||void 0,alt:"Avatar"}),(0,t.jsx)(a.AvatarFallback,{children:r})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-medium",children:[s.firstName," ",s.lastName]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center",children:[(0,t.jsx)(l,{className:"w-3 h-3 mr-1"}),s.email]})]})]})}},{id:"role",accessorKey:"role",header:({column:e})=>(0,t.jsx)(o.w,{column:e,title:"Role"}),cell:({row:e})=>{let s=e.original;return(0,t.jsx)(n.E,{className:w[s.role]||"bg-gray-500/10 text-gray-600 border-gray-200",children:s.role.replace("_"," ").toLowerCase()})}},{id:"activity",header:"Activity",cell:({row:e})=>{let s=e.original;return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,t.jsx)(d.A,{className:"w-3 h-3 text-muted-foreground"}),(0,t.jsxs)("span",{children:[s._count.orders," orders"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,t.jsx)(c,{className:"w-3 h-3"}),(0,t.jsxs)("span",{children:[s._count.reviews," reviews"]})]})]})}},{id:"addresses",header:"Addresses",cell:({row:e})=>{let s=e.original.addresses.length;return(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:s}),(0,t.jsxs)("span",{className:"text-muted-foreground ml-1",children:["address",1!==s?"es":""]})]})}},{id:"joinedAt",accessorKey:"createdAt",header:({column:e})=>(0,t.jsx)(o.w,{column:e,title:"Joined"}),cell:({row:e})=>{let s=e.original;return(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,t.jsx)(u.A,{className:"w-3 h-3 text-muted-foreground"}),(0,t.jsx)("span",{children:new Date(s.createdAt).toLocaleDateString()})]})}},{id:"actions",cell:({row:e})=>(0,t.jsx)(N,{data:e.original})}]},73024:e=>{"use strict";e.exports=require("node:fs")},74075:e=>{"use strict";e.exports=require("zlib")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},79551:e=>{"use strict";e.exports=require("url")},90005:(e,s,r)=>{Promise.resolve().then(r.t.bind(r,95862,23)),Promise.resolve().then(r.bind(r,26482)),Promise.resolve().then(r.bind(r,97680)),Promise.resolve().then(r.bind(r,48625)),Promise.resolve().then(r.bind(r,52814)),Promise.resolve().then(r.bind(r,39511))},96330:e=>{"use strict";e.exports=require("@prisma/client")}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[8291,3861,8281,5958,1151,2257,6912,6395,2505,8363,3662,8850],()=>r(38450));module.exports=t})();